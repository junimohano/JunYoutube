<h2 class="colorDimgray">Video Info</h2>

<ng-template #loading>
    <div fxLayout fxLayoutAlign="center">
        <md-spinner color="primary"></md-spinner>
    </div>
</ng-template>

<div *ngIf="!isVideoSearching; else loading">

    <ng-template #noResult>
        <em>No video</em>
    </ng-template>

    <div *ngIf="youtubeVideo; else noResult">

        <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="20px">
            <iframe fxFlex="50" fxFlex.md="100" fxFlex.xs="100" [src]='youtubeVideo.embedUrl' height="400" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

            <div fxFlex="50" fxFlex.md="100" fxFlex.xs="100">
                <h2>
                    <a [href]="searchData.url" target="_blank">{{youtubeVideo.title}}</a>
                </h2>
                <p>{{youtubeVideo.publishedAt | date:"MM/dd/yy"}}</p>
                <p>{{youtubeVideo.duration }}</p>
                <p>{{youtubeVideo.viewCount | number}} Views</p>
                <p>{{youtubeVideo.commentCount | number}} Comments</p>
                <p>
                    <md-icon>thumb_up</md-icon> {{youtubeVideo.likeCount | number}}
                    <md-icon>thumb_down</md-icon> {{youtubeVideo.dislikeCount | number}}
                </p>
                <div style="max-height: 200px; overflow-y: auto;">
                    {{youtubeVideo.description}}
                </div>

                <div class="margin-top-30">

                    <md-select style="min-width: 180px;" placeholder="video" [(ngModel)]="selectedVideo" name="video">
                        <md-option *ngFor="let youtubeVideo of youtubeVideo.youtubeVideoInfos" [value]="youtubeVideo">

                            {{youtubeVideo.videoExtension}}
                            <span *ngIf="youtubeVideo.resolution != 0">{{youtubeVideo.resolution}}P</span>
                            <span *ngIf="youtubeVideo.audioBitrate != 0">{{ youtubeVideo.audioBitrate }}Kbps</span>

                        </md-option>
                    </md-select>

                    <button md-raised-button color="primary" (click)="videoDownload()" mdTooltip="video" mdTooltipPosition="right">
                        <span *ngIf="selectedVideo?.audioBitrate == 0; else resolutionTemplate">
                            <md-icon class="wrongPositionOfMdIcon">volume_off</md-icon>　　Download
                        </span>
                        <ng-template #resolutionTemplate>
                            <span *ngIf="selectedVideo?.resolution == 0; else videoTemplate">
                                <md-icon class="wrongPositionOfMdIcon">audiotrack</md-icon>　　Download
                            </span>
                            <ng-template #videoTemplate>
                                <md-icon>videocam</md-icon> Download
                            </ng-template>
                        </ng-template>
                    </button>
                </div>

                <div *ngIf="youtubeVideo.youtubeCaptionInfos.length > 0" class="margin-top-25">
                    <md-select style="min-width: 180px;" placeholder="subtitle" [(ngModel)]="selectedCaption" name="caption">
                        <md-option *ngFor="let youtubeCaption of youtubeVideo.youtubeCaptionInfos" [value]="youtubeCaption">
                            {{youtubeCaption.languageFullName}} ({{youtubeCaption.language}})
                        </md-option>
                    </md-select>

                    <button md-raised-button color="warn" (click)="captionDownload()" mdTooltip="subtitle" mdTooltipPosition="right">
                        <md-icon>closed_caption</md-icon> Download
                    </button>
                </div>

                <div style="margin-bottom: 20px;">
                </div>
            </div>
        </div>
    </div>
</div>